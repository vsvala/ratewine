<h1>List of ratings</h1>

<% if @ratings.empty? %>
 wine has not yet been rated!
<% else %>
<p> Number of ratings: <%= @ratings.count %> </p>
  <%# <p>Number of ratings:<%= @active_ratings.count %></p>

<ul>
 <% @ratings.each do |rating| %>
   <li> <%= rating %> <%= link_to rating.user.username, rating.user %> </li>
 <% end %>
</ul>

<h3>Best wines</h3>
<table class="table table-hover">
  <thead>
  <tr>
   <th>name</th>
    <th>average</th>
  </tr>
  </thead>

  <tbody>
  <% @top_wines.each do |wine| %>
      <tr>
        <td><%= link_to wine.name, wine %></td>
           <td><%= round(wine.average_rating) %></td>
        <td></td>
      </tr>
  <% end %>
  </tbody>
</table>


<h3>Best wineyards</h3>
<table class="table table-hover">
  <thead>
  <tr>
   <th>name</th>
    <th>average</th>
  </tr>
  </thead>

  <tbody>
  <% @top_wineyards.each do |wineyard| %>
      <tr>
        <td><%= link_to wineyard.name, wineyard %></td>
           <td><%= round(wineyard.average_rating) %></td>
        <td></td>
      </tr>
  <% end %>
  </tbody>
</table>

<h3>Best styles</h3>
<table class="table table-hover">
  <thead>
  <tr>
   <th>name</th>
    <th>average</th>
  </tr>
  </thead>

  <tbody>
  <% @top_wines.each do |wine| %>
      <tr>
        <td><%= link_to wine.style.name, wine.style %></td>
           <td><%= round(wine.average_rating) %></td>
        <td></td>
      </tr>
  <% end %>
  </tbody>
</table>

<h3>Most active users</h3>
<table class="table table-hover">
  <thead>
  <tr>
   <th>name</th>
    <th>ratings</th>
  </tr>
  </thead>

  <tbody>
  <% @top_users.each do |user| %>
      <tr>
        <td><%= link_to user.username, user %></td>
           <td><%= user.ratings.count %></td>
        <td></td>
      </tr>
  <% end %>
  </tbody>
</table>


<h3>Recent ratings</h3>
<ul>
 <% @recent_ratings.each do |rating| %>
   <li> <%= rating %> by <%= link_to rating.user.username, rating.user %> at <%= rating.created_at %> </li>
 <% end %>
</ul>

<% end %>